###################################################################################################
##
##      Информация о проекте
##
###################################################################################################

project(Burst)
cmake_minimum_required(VERSION 2.8.12)

###################################################################################################
##
##      Опции компиляции
##
###################################################################################################

add_compile_options(
    -std=c++14
    -Werror

    -Wall
    -Wextra
    -Wpedantic

    -Wcast-align
    -Wcast-qual
    -Wconversion
    -Wctor-dtor-privacy
    -Wenum-compare
    -Wfloat-equal
    -Wnon-virtual-dtor
    -Wold-style-cast
    -Woverloaded-virtual
    -Wredundant-decls
    -Wsign-conversion
    -Wsign-promo
)

if(NOT CMAKE_BUILD_TYPE)
    message(WARNING "Тип сборки не выбран (см. опцию CMAKE_BUILD_TYPE).")
else()
    message(STATUS "Build type: ${CMAKE_BUILD_TYPE}")
endif()

include_directories(${CMAKE_SOURCE_DIR})

###################################################################################################
##
##      Сторонние библиотеки
##
###################################################################################################

find_package(Boost 1.59.0 COMPONENTS unit_test_framework program_options REQUIRED)
include_directories(SYSTEM ${Boost_INCLUDE_DIRS})

###################################################################################################
##
##      Установка
##
###################################################################################################

install(DIRECTORY ${CMAKE_SOURCE_DIR}/burst DESTINATION ${CMAKE_INSTALL_PREFIX}/include)

###################################################################################################
##
##      Тесты
##
###################################################################################################

add_subdirectory(test)

###################################################################################################
##
##      Измерения
##
###################################################################################################

add_subdirectory(benchmark)

###################################################################################################
##
##      Документация
##
###################################################################################################

add_subdirectory(doc)
